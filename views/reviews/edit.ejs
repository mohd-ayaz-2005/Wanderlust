<% layout("/layouts/boilerplate") %>

<div class="row mt-4 justify-content-center">
  <div class="col-lg-7 col-md-9">
    <h3 class="fw-bold mb-3">Edit your review for "<%= listing.title %>"</h3>
    <form action="/listings/<%= listing._id %>/reviews/<%= review._id %>?_method=PUT" method="post" class="needs-validation card p-4 auth-card" novalidate>
      <label class="form-label d-block">Rating</label>
      <div class="star-rating mb-3">
        <% for (let r = 5; r >= 1; r--) { %>
        <input type="radio" id="star-edit-<%= r %>" name="review[rating]" value="<%= r %>" <%= Number(review.rating) === r ? "checked" : "" %> required />
        <label for="star-edit-<%= r %>" title="<%= r %> stars">â˜…</label>
        <% } %>
      </div>

      <div class="mb-3">
        <label for="comment" class="form-label">Comment</label>
        <textarea name="review[comment]" id="comment" cols="30" rows="5" class="form-control" required><%= review.comment %></textarea>
        <div class="invalid-feedback">
          Please provide a comment.
        </div>
      </div>

      <button class="btn btn-dark">Update Review</button>
    </form>
  </div>
</div>

